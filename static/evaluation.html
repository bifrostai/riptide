{% extends "base.html" %}
{% from "section.html" import render_section %}

{% block content %}
{% for section in sections.values() %}
{{ render_section(section) }}
{% endfor %}
{% for infobox in infoboxes %}
<div class="infobox">
    <div class="infobox-title">{{ infobox['title'] }}</div>
    <div class="infobox-content">{{ infobox['content'] }}</div>
</div>
{% endfor %}
<div id="MissedExtra">
    <h2>Classwise MissedErrors and recall</h2>
    <p>
        Number of MissedErrors per class | number of total objects per class
    </p>
    <div class="summary-row">
        {% for class_idx, individual_summary in classwise_summary.items() %}
            {% set missed_error = individual_summary["MissedError"] %}
            {% set total_count = individual_summary["total_count"] %}
            <div class="summary-item">
                <div class="summary-metric-title gradient">Class {{ class_idx }}</div>
                <div class="summary-metric-value">{{ missed_error }} <span class="text-dark">| {{ total_count }}</span></div>
            </div>
        {% endfor %}
    </div>
    <p>
        Recall per class
    </p>
    <div class="summary-row">
        {% for class_idx, individual_summary in classwise_summary.items() %}
            <div class="summary-item">
                <div class="summary-metric-title gradient">Class {{ class_idx }}</div>
                <div class="summary-metric-value">{{ individual_summary['recall'] }}</span></div>
            </div>
        {% endfor %}
    </div>
    <h2>Aspect ratio and size variance</h2>
    <p>
        Variance of aspect ratios across MissedErrors
    </p>
    <div class="summary-row">
        {% for class_idx, aspect_var in missed_aspect_var.items() %}
        <div class="summary-item">
            <div class="summary-metric-title gradient">Class {{ class_idx }}</div>
            <div class="summary-metric-value">{{ aspect_var }}</div>
        </div>
        {% endfor %}
    </div>
    <p>
        Variance of object size (area) across MissedErrors
    </p>
    <div class="summary-row">
        {% for class_idx, size_var in missed_size_var.items() %}
        <div class="summary-item">
            <div class="summary-metric-title gradient">Class {{ class_idx }}</div>
            <div class="summary-metric-value">{{ size_var }}</div>
        </div>
        {% endfor %}
    </div>
</div>
<div id="TrueExtra">
    <h2>Classwise True Positives</h2>
    <p>
        Number of True Positives per class | number of total objects per class
    </p>
    <div class="summary-row">
        {% for class_idx, individual_summary in classwise_summary.items() %}
            {% set true_positives = individual_summary.get("true_positives", 0) %}
            {% set total_count = individual_summary.get("total_count", 0) %}
            <div class="summary-item">
                <div class="summary-metric-title gradient">Class {{ class_idx }}</div>
                <div class="summary-metric-value">{{ true_positives }} <span class="text-dark">| {{ total_count }}</span></div>
            </div>
        {% endfor %}
    </div>
</div>

{% endblock %}
